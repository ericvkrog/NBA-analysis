# NBA Team-Season Modeling (2000–2023)

This project analyzes NBA team-season performance using engineered efficiency features and simple predictive models.

## Why I made this

I built this project to improve and demonstrate core data science skills such as data cleaning/merging, feature engineering, and time-safe modeling using NBA team-season data. The output is a single Tableau-ready dataset and a small set of visuals, including a payroll “value” lens to show over/under-performers relative to spending.

What this does:
- Loads regular-season team stats (2000–2023) and builds efficiency features (eFG%, turnover rate, 3PA rate, FT rate, etc.).
- Evaluates Ridge regression models with a time-based split (no training on future seasons).
- Merges payroll and playoff results when those source files cover the selected season range (coverage depends on the CSV sources).
- Writes a single enriched team-season CSV (including engineered rates, playoffs, and payroll fields) for Tableau and downstream analysis.
- Adds two extensions:
  - **Payroll value (net of team stats):** flags teams that win more/less than expected given payroll + efficiency metrics.
  - **Era split:** compares model performance and feature importance pre-2015 vs the modern NBA.

## Repo structure

```text
.
├── README.MD
├── nba_analysis.py
├── requirements.txt
├── .gitignore
├── tableau
│   └── nba_dashboards.twbx
├── repo_assets
│   └── league_trends_and_models.png
├── data
│   ├── README.md
│   └── raw
│       ├── nba_team_stats_00_to_23.csv
│       ├── nba_team_stats_playoffs_00_to_21.csv
│       └── nba_team_payroll_1990_to_2023.csv
└── outputs
    └── (generated artifacts)
```

## Data

Raw CSVs are included in `data/raw/` (CC0 / Public Domain). Full citations and links are in `data/README.md`.

## Results

Running the script writes the following artifacts to `outputs/`:
- `outputs/nba_team_seasons_enriched.csv` — one merged/enriched dataset for Tableau and downstream analysis
- `outputs/figures/league_trends_and_models.png` — summary figure saved to disk

Note: payroll and playoff merges do not cover every season in the regular-season dataset. When results are described as “restricted,” they are computed only on the subset of seasons where payroll exists (no imputation of missing payroll years).

Key takeaways:
- Shooting efficiency (**eFG%**) is consistently one of the strongest predictors of win%.
- Payroll adds signal in the modern era (where available), reducing prediction error vs stats-only models.
- Feature importance shifts across eras (pre-2015 vs modern NBA).

## Modeling notes

- Models use **Ridge regression (L2 regularization)** to keep coefficients stable when features are correlated.
- Win% error is reported as **MAE in percentage points (pp)** (e.g., 8.5 pp = average absolute error of 8.5% in win rate).
- In the enriched dataset, `win_percentage` is stored as a 0–1 fraction, while `win_pct_pp` is the same value expressed as 0–100 for visualization.
- Payroll models are evaluated on a **restricted** subset of seasons where payroll exists, so comparisons are apples-to-apples.
- Payroll is standardized within each season as `payroll_z_by_season` (relative spending, comparable across eras).

## Preview

![Summary figure](repo_assets/league_trends_and_models.png)

(Generated by `python nba_analysis.py`.)

## Tableau dashboards

The Tableau workbook is included in `tableau/nba_dashboards.twbx`. It contains two dashboards:

- **Modern vs past NBA**: league-average trends (eFG% and 3PA rate) plus a pre-2015 vs modern delta (percentage-point change) summary.
- **NBA Value (Wins vs Payroll with Residual)**: payroll (z-score within season) vs win% residual (pp), with Top 10 / Bottom 10 over- and under-performers for a selected season.

### Interactive versions (Tableau Public)

- **Modern vs past NBA**: https://public.tableau.com/views/Dashboard1forNBA/Modernvspastnba
- **NBA Value (Wins vs Payroll with Residual)**: https://public.tableau.com/app/profile/eric.krog/viz/Dashboard1forNBA/NBAValueWinsvsPayrollwithResidual

### Dashboard previews

[![Modern vs past NBA](tableau/Modern_vs_past_nba.png)](https://public.tableau.com/views/Dashboard1forNBA/Modernvspastnba)

[![NBA Value (Wins vs Payroll with Residual)](tableau/NBA_Value.png)](https://public.tableau.com/app/profile/eric.krog/viz/Dashboard1forNBA/NBAValueWinsvsPayrollwithResidual)

## Enriched dataset columns (highlights)

- `payroll_z_by_season`: payroll standardized within each season (z-score within season; makes spending comparable across eras).
- `win_pct_pp`: win percentage expressed in percentage points (0–100) for visualization.
- `win_pct_expected`: expected win% (pp) from the payroll+stats value model (only populated where payroll is available; otherwise NA).
- `win_pct_residual`: actual − expected win% (pp); positive = outperformed expectation (NA when expected is NA).
- `plus_minus_per_game`: point differential per game (regular season).
- `po_games`, `po_wins`: playoff games and playoff wins for that team-season (where available).
- `po_data_available`, `payroll_available`: indicators for whether playoff/payroll data is present for that row.
- `payroll_per_win`: payroll divided by regular-season wins (only defined when payroll is available and wins > 0).

## How to run

1) Install dependencies:
```bash
pip install -r requirements.txt
```

2) Run the analysis:
```bash
python nba_analysis.py
```


## AI use

I used AI tools for code cleanup/formatting and for drafting README text. All analysis, engineering decisions, and final code were reviewed and tested by me.
